<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>放上自己的登山軌跡KML、GPX</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.120/Build/Cesium/Cesium.js"></script>
    <link
      href="https://cesium.com/downloads/cesiumjs/releases/1.120/Build/Cesium/Widgets/widgets.css"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        padding: 0;
        margin: 0;
      }
      #cesiumContainer {
        width: 100%;
        height: 100vh;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="cesiumContainer"></div>
    <script>
      // 創建Cesium Viewer實例
      let viewer = new Cesium.Viewer("cesiumContainer", {
        // terrainProvider: Cesium.createWorldTerrain(), // 加入全球地形
        imageryProvider: false, // 關閉默認的影像圖層
        animation: false,
        timeline: false,
        infoBox: false, // 隱藏信息框
        selectionIndicator: false, // 隱藏選擇指示器
        navigationHelpButton: false, // 隱藏導航幫助按鈕
        geocoder: false, // 隱藏地理編碼搜尋框
        homeButton: false, // 隱藏首頁按鈕
        sceneModePicker: false, // 隱藏2D/3D切換按鈕
        baseLayerPicker: false, // 隱藏圖層選擇器
        fullscreenButton: false, // 隱藏全螢幕按鈕
        vrButton: false, // 隱藏VR模式按鈕
        creditsDisplay: false, // 隱藏版權信息
      });

      // 添加WMTS圖層
      viewer.imageryLayers.addImageryProvider(
        new Cesium.UrlTemplateImageryProvider({
          url: "https://wmts.nlsc.gov.tw/wmts/EMAP5/default/EPSG:3857/{z}/{y}/{x}.png",
          tilingScheme: new Cesium.WebMercatorTilingScheme(),
          maximumLevel: 18,
        })
      );

      // 設定視角到台灣
      viewer.camera.setView({
        destination: Cesium.Cartesian3.fromDegrees(120.9, 23.7, 800000.0),
      });

      // 繪製線段的函數
      function drawLine(point1, point2) {
        viewer.entities.add({
          polyline: {
            positions: Cesium.Cartesian3.fromDegreesArray([ // Cartesian3 用於表示三維空間中的點或向量。這個類的名稱源於笛卡爾坐標系（Cartesian Coordinate System），其中每個點由三個數值來定義：x、y 和 z。這些數值通常對應於三維空間中的位置或方向。
              point1.longitude,
              point1.latitude,
              point2.longitude,
              point2.latitude,
            ]),
            width: 5, // 線段的寬度
            material: Cesium.Color.RED, // 線段的顏色
          },
        });
      }

      // 假設使用者提供的兩個點
      let point1 = { longitude: 120.9, latitude: 23.7 };
      let point2 = { longitude: 121.0, latitude: 23.8 };

      // 呼叫函數來繪製線段
      drawLine(point1, point2);
    </script>
  </body>
</html>
  